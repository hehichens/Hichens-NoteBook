## 1. 指令系统的发展和性能要求

### 1.1 指令系统发展

- 程序：解决问题的一系列指令
- 指令：计算机执行某种操作的命令
- 指令分类
  - 微指令：属于硬件
  - 机器指令（指令）：独立完成算术或逻辑运算
  - 宏指令：若干机器指令组成的软件指令，属于软件
- 指令系统：所有机器指令的集合，直接影响机器的硬件系统、软件结构以及机器的适用范围

#### CISC 与 RISC

- CISC（complex instruction set computer）
  - 采用复杂的指令系统，以增强计算机功能、提高计算机速度

- RISC（reduced instruction set computer）
  - 从简化指令系统和优化硬件设计来提高系统性能与速度

### 1.2 指令系统要求

- 完备性：指令齐备
- 有效性：指令占用内存少、效率高
- 规整性：使用统一、方便
  - 对称性：所有指令都可以使用各种寻址方式
  - 匀齐性：一种操作性质的指令可以支持各种数据类型
  - 一致性：指令长度与数据长度有一定关系，方便处理和存取
- 兼容性：向下兼容



## 2. 指令格式

- 二进制代码表示
- 操作码字段（OP） + 地址码字段（A）

### 2.1 操作码

- 操作码字段的位数取决于指令系统的规模
- 类型
  - 固定长度的操作码	
    - 所有指令长度相等
    - 控制简单、速度快，适用于指令不多的场景
  - 可变长度的操作码
    - 频繁使用的指令使用较少的操作码、不常使用的指令利用操作码拓展技术进行拓展
    - 充分利用硬件资源，适用于大规模的指令系统

### 2.1 地址码

- 有几个地址码字段，就称为几地址指令
- 零地址指令：OP
  - 无任何操作，`NOP`、`HALT`
  - 单操作数运算，`CWD`
- 一地址指令：OP+A1
  - 单操作数运算，`INC`
  - 双操作数运算，`MUL`
- 两地址指令：OP+A1+A2
- 三地址指令
- 多地址指令
  - 功能强，一般用高档小型机或中大型机
  - 用于实现成批数据处理，字符串处理、向量或矩阵运算指令等

#### 两地址指令分类

- 存储器-存储器（SS）
- 寄存器-寄存器（RR）
- 寄存器-存储器（RS）

#### 操作码拓展

- 指令不需要某个地址码，则把他的操作码扩充到地址码
- 这样既充分利用了指令各字段，又不增加指令长度

### 2.3 指令字长度

- 机器字长
  - 运算器一次能处理的二进数位数
  - 长度直接决定着CPU运算精度和直接寻址能力的大小
- 指令字长
  - 指令包含二进制的位数
  - 由操作码长度、操作数长度和个数共同决定

### 2.4 指令助记符

- 3-4个英文缩写来表示指令操作码
- 指令助记符只是指令操作码字段的一种表示方法

## 3. 指令和数据寻址方式

### 3.1 指令寻址方式

- 顺序寻址

  - 按程序顺序执行
  - 用程序计数器（指令指针寄存器）记录指令存放单元地址

- 跳跃寻址

  - 当程序转移时执行
  - 程序计数器（Program Counter PC）的内容由本条指令给出



### 3.2 操作数寻址方式:star:

#### 3.2.1 操作数的三种方式

- 在指令中，立即数
- 寄存器中
- 内存中

#### 3.2.2 寻址方式

- 隐含寻址

  - 操作地址隐含在操作码中

- 立即寻址

  - 形式地址就是操作数
  - 优点：指令执行时不需要访存，速度快
  - 缺点：形式地址的位数限制了立即数的范围

- 直接寻址

  - 有效地址由形式地址字段A直接给出
  - 特点
    - 执行阶段访问了一次存储器
    - A的位数限制了寻址范围
    - 操作数地址不易修改（必须修改A）

- 间接寻址

  - 形式地址D是操作数地址的指示器
  - D指向的内容才是才是操作数的有效地址
  - 需两次访存，影响指令执行速度
  - 寻址特制I字段区分直接寻址和间接寻址方式

- 寄存器寻址

  - 形式地址字段A为寄存器编号
  - 特点
    - 执行期间不访存，只访问寄存器，速度快
    - 寄存器个数有限，可以缩短指令字长

- 寄存器间接寻址

  - 操作数地址在寄存器中， EA=(Ri)， 操作数在内存中
  - 便于编制循环程序

- 偏移寻址

  - 直接寻址+寄存器间接寻址

  







